[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Lab 10: Distances and the Border Zone",
    "section": "",
    "text": "In this lab we will explore the properties of sf, sfc, and sfg features & objects; how they are stored; and issues related to distance calculation and coordinate transformation.\nWe will continue to build on our data wrangling and data visualization skills; as well as document preparation via Quarto and GitHub.\n\n\n\n\n# spatial data science\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.4.3\n\n\nWarning: package 'ggplot2' was built under R version 4.4.3\n\n\nWarning: package 'tidyr' was built under R version 4.4.3\n\n\nWarning: package 'readr' was built under R version 4.4.3\n\n\nWarning: package 'purrr' was built under R version 4.4.3\n\n\nWarning: package 'dplyr' was built under R version 4.4.3\n\n\nWarning: package 'lubridate' was built under R version 4.4.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(sf)\n\nWarning: package 'sf' was built under R version 4.4.3\n\n\nLinking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE\n\nlibrary(units)\n\nWarning: package 'units' was built under R version 4.4.3\n\n\nudunits database from C:/Users/nevar/AppData/Local/R/win-library/4.4/units/share/udunits/udunits2.xml\n\n# Visualization\nlibrary(gghighlight)\n\nWarning: package 'gghighlight' was built under R version 4.4.3\n\nlibrary(ggrepel)\n\nWarning: package 'ggrepel' was built under R version 4.4.3\n\nlibrary(knitr)\n\nWarning: package 'knitr' was built under R version 4.4.3\n\n#Loaded AOI later with Question 1.2!"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html#question-1",
    "href": "index.html#question-1",
    "title": "Lab 10: Distances and the Border Zone",
    "section": "Question 1:",
    "text": "Question 1:\nFor this lab we need three (3) datasets.\nSpatial boundaries of continental USA states (1.1) Boundaries of Canada, Mexico and the United States (1.2) All USA cites (1.3)\n\n1.1 - Define a Projection\n\neqdc &lt;- '+proj=eqdc +lat_0=40 +lon_0=-96 +lat_1=20 +lat_2=60 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs'\n\nMeaning of this beginning code:\n+proj=eqdc → Equidistant Conic projection\n+lat_0=40 → Latitude of the projection’s center (40°N)\n+lon_0=-96 → Central meridian (96°W)\n+lat_1=20 → First standard parallel (20°N)\n+lat_2=60 → Second standard parallel (60°N)\n+x_0=0 → False easting (0 meters)\n+y_0=0 → False northing (0 meters)\n+datum=NAD83 → Uses the North American Datum 1983 (NAD83)\n+units=m → Units are in meters\n+no_defs → No additional default parameters from PROJ’s database\n\n\n1.2 - Get USA state boundaries\n\nremotes::install_github(\"mikejohnson51/AOI\")\n\nUsing GitHub PAT from the git credential store.\n\n\nSkipping install of 'AOI' from a github remote, the SHA1 (f821d499) has not changed since last install.\n  Use `force = TRUE` to force installation\n\nlibrary(AOI)\n\nremotes::install_github(\"ropensci/USAboundaries\")\n\nUsing GitHub PAT from the git credential store.\n\n\nSkipping install of 'USAboundaries' from a github remote, the SHA1 (0f56f492) has not changed since last install.\n  Use `force = TRUE` to force installation\n\nremotes::install_github(\"ropensci/USAboundariesData\")\n\nUsing GitHub PAT from the git credential store.\n\n\nSkipping install of 'USAboundariesData' from a github remote, the SHA1 (064cdbcb) has not changed since last install.\n  Use `force = TRUE` to force installation\n\nremotes::install_github(\"ropenscilabs/rnaturalearthdata\")\n\nUsing GitHub PAT from the git credential store.\n\n\nSkipping install of 'rnaturalearthdata' from a github remote, the SHA1 (ff4d891f) has not changed since last install.\n  Use `force = TRUE` to force installation\n\n# Getting USA Boundaries:\n\nus &lt;- aoi_get(state = 'conus') |&gt;\n  glimpse()\n\nRows: 49\nColumns: 15\n$ state_region           &lt;int&gt; 3, 4, 3, 4, 4, 1, 3, 3, 3, 3, 4, 2, 2, 2, 2, 3,…\n$ state_division         &lt;int&gt; 6, 8, 7, 9, 8, 1, 5, 5, 5, 5, 8, 3, 3, 4, 4, 6,…\n$ feature_code           &lt;chr&gt; \"1779775\", \"1779777\", \"0068085\", \"1779778\", \"17…\n$ state_name             &lt;chr&gt; \"Alabama\", \"Arizona\", \"Arkansas\", \"California\",…\n$ state_abbr             &lt;chr&gt; \"AL\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"DC\",…\n$ name                   &lt;chr&gt; \"Alabama\", \"Arizona\", \"Arkansas\", \"California\",…\n$ fip_class              &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ tiger_class            &lt;fct&gt; G4000, G4000, G4000, G4000, G4000, G4000, G4000…\n$ combined_area_code     &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ metropolitan_area_code &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ functional_status      &lt;fct&gt; A, A, A, A, A, A, A, A, A, A, A, A, A, A, A, A,…\n$ land_area              &lt;dbl&gt; 131175477769, 294363973043, 134660767709, 40367…\n$ water_area             &lt;dbl&gt; 4591897964, 855871553, 3121950081, 20293573058,…\n$ fip_code               &lt;chr&gt; \"01\", \"04\", \"05\", \"06\", \"08\", \"09\", \"10\", \"11\",…\n$ geometry               &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-85.4883 30..., MU…\n\n# Setting it to the projection we made earlier:\n\nus_eqdc &lt;- st_transform(us, crs = eqdc)\n\nst_crs(us_eqdc)\n\nCoordinate Reference System:\n  User input: +proj=eqdc +lat_0=40 +lon_0=-96 +lat_1=20 +lat_2=60 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs \n  wkt:\nPROJCRS[\"unknown\",\n    BASEGEOGCRS[\"unknown\",\n        DATUM[\"North American Datum 1983\",\n            ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6269]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8901]]],\n    CONVERSION[\"unknown\",\n        METHOD[\"Equidistant Conic\",\n            ID[\"EPSG\",1119]],\n        PARAMETER[\"Latitude of false origin\",40,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8821]],\n        PARAMETER[\"Longitude of false origin\",-96,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8822]],\n        PARAMETER[\"Latitude of 1st standard parallel\",20,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8823]],\n        PARAMETER[\"Latitude of 2nd standard parallel\",60,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8824]],\n        PARAMETER[\"Easting at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8826]],\n        PARAMETER[\"Northing at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8827]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nBased on the glimpse of what the us boundary contains from the AOI , we can see that this data needed to be changed to reflex the earlier rpojection we made for mapping in North America. By using st_transform and st_crs, I was able to form the data, to reflect the boundaries we want it to be projected into!\n\n\n1.3 - Get country boundaries for Mexico, the United States of America, and Canada\n\nbound &lt;- aoi_get(country = c(\"MX\", \"CA\", \"USA\"))\n\n# Setting it to the projection we made earlier:\n\nb_eqdc &lt;- st_transform(bound, crs = eqdc)\n\nst_crs(b_eqdc)\n\nCoordinate Reference System:\n  User input: +proj=eqdc +lat_0=40 +lon_0=-96 +lat_1=20 +lat_2=60 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs \n  wkt:\nPROJCRS[\"unknown\",\n    BASEGEOGCRS[\"unknown\",\n        DATUM[\"North American Datum 1983\",\n            ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6269]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8901]]],\n    CONVERSION[\"unknown\",\n        METHOD[\"Equidistant Conic\",\n            ID[\"EPSG\",1119]],\n        PARAMETER[\"Latitude of false origin\",40,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8821]],\n        PARAMETER[\"Longitude of false origin\",-96,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8822]],\n        PARAMETER[\"Latitude of 1st standard parallel\",20,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8823]],\n        PARAMETER[\"Latitude of 2nd standard parallel\",60,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8824]],\n        PARAMETER[\"Easting at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8826]],\n        PARAMETER[\"Northing at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8827]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nNow both the us map and the boundaries of selected states (Mexico, Canada, and US) boundaries are all projected within the EQDC layout!\n\n\n1.4 - Get city locations from the CSV file\n\nuscities &lt;- read_csv(\"data/uscities.csv\")\n\nRows: 31254 Columns: 17\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (9): city, city_ascii, state_id, state_name, county_fips, county_name, s...\ndbl (6): lat, lng, population, density, ranking, id\nlgl (2): military, incorporated\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nThis data set contains an extensive representation of US cities, including their latitude, longitudes, population of the cities, along with key identifiers of each city, county, and zip codes!!!\n\n# Setting uscities data frame to a spatial object!\n\nuscities_sf &lt;- st_as_sf(uscities, coords = c(\"lng\", \"lat\"), crs = 4326) |&gt; \n  st_transform(crs = eqdc)\n\n# Removing unwanted cities:\n\nuscities_sf &lt;- uscities_sf |&gt;\n  filter(!state_id %in% c(\"AK\", \"HI\", \"PR\"))\n\n\nst_crs(uscities_sf)\n\nCoordinate Reference System:\n  User input: +proj=eqdc +lat_0=40 +lon_0=-96 +lat_1=20 +lat_2=60 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs \n  wkt:\nPROJCRS[\"unknown\",\n    BASEGEOGCRS[\"unknown\",\n        DATUM[\"North American Datum 1983\",\n            ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6269]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8901]]],\n    CONVERSION[\"unknown\",\n        METHOD[\"Equidistant Conic\",\n            ID[\"EPSG\",1119]],\n        PARAMETER[\"Latitude of false origin\",40,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8821]],\n        PARAMETER[\"Longitude of false origin\",-96,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8822]],\n        PARAMETER[\"Latitude of 1st standard parallel\",20,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8823]],\n        PARAMETER[\"Latitude of 2nd standard parallel\",60,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8824]],\n        PARAMETER[\"Easting at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8826]],\n        PARAMETER[\"Northing at false origin\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8827]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\nglimpse(uscities_sf)\n\nRows: 30,460\nColumns: 16\n$ city         &lt;chr&gt; \"New York\", \"Los Angeles\", \"Chicago\", \"Miami\", \"Houston\",…\n$ city_ascii   &lt;chr&gt; \"New York\", \"Los Angeles\", \"Chicago\", \"Miami\", \"Houston\",…\n$ state_id     &lt;chr&gt; \"NY\", \"CA\", \"IL\", \"FL\", \"TX\", \"TX\", \"PA\", \"GA\", \"DC\", \"MA…\n$ state_name   &lt;chr&gt; \"New York\", \"California\", \"Illinois\", \"Florida\", \"Texas\",…\n$ county_fips  &lt;chr&gt; \"36081\", \"06037\", \"17031\", \"12086\", \"48201\", \"48113\", \"42…\n$ county_name  &lt;chr&gt; \"Queens\", \"Los Angeles\", \"Cook\", \"Miami-Dade\", \"Harris\", …\n$ population   &lt;dbl&gt; 18832416, 11885717, 8489066, 6113982, 6046392, 5843632, 5…\n$ density      &lt;dbl&gt; 10943.7, 3165.8, 4590.3, 4791.1, 1386.5, 1477.2, 4547.5, …\n$ source       &lt;chr&gt; \"shape\", \"shape\", \"shape\", \"shape\", \"shape\", \"shape\", \"sh…\n$ military     &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…\n$ incorporated &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…\n$ timezone     &lt;chr&gt; \"America/New_York\", \"America/Los_Angeles\", \"America/Chica…\n$ ranking      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ zips         &lt;chr&gt; \"11229 11226 11225 11224 11223 11221 11220 11385 10169 10…\n$ id           &lt;dbl&gt; 1840034016, 1840020491, 1840000494, 1840015149, 184002092…\n$ geometry     &lt;POINT [m]&gt; POINT (1735953 288853.9), POINT (-1939654 -413013.8…"
  },
  {
    "objectID": "index.html#question-2",
    "href": "index.html#question-2",
    "title": "Lab 10: Distances and the Border Zone",
    "section": "Question 2:",
    "text": "Question 2:\nHere we will focus on calculating the distance of each USA city to (1) the national border (2) the nearest state border (3) the Mexican border and (4) the Canadian border.\n\n2.1 - Distance to USA Border (coastline or national) (km)\n\n# ONE GEOMETRY!\nunion_us &lt;- us_eqdc |&gt;\n  st_union()\n\n# Converting to a MULTILINESTRING\nus_border &lt;- \n  st_cast(union_us, \"MULTILINESTRING\")\n\n#City to border Distance:\nbor_dist &lt;- \n  st_distance(uscities_sf, us_border)\n\n#CONVERSION TIME (km) and UNLISTING!\nuscities_sf$bor_dist_km &lt;-\n  set_units(bor_dist, \"km\") |&gt;\n  drop_units()\n\n#Flextabl of five cities farthest from state border:\n\nlibrary(flextable)\n\nWarning: package 'flextable' was built under R version 4.4.3\n\n\n\nAttaching package: 'flextable'\n\n\nThe following object is masked from 'package:purrr':\n\n    compose\n\ntop5_c &lt;- uscities_sf |&gt;\n  st_drop_geometry() |&gt;\n  arrange(desc(bor_dist_km)) |&gt;\n  select(city, state_name, bor_dist_km) |&gt;\n  slice_head(n = 5)\n\nflextable(as.data.frame(top5_c))\n\ncitystate_namebor_dist_kmMinneapolisKansas1,084.275AdaKansas1,084.112BarnardKansas1,083.737ManchesterKansas1,080.210TalmageKansas1,080.049\n\n\n\n\n2.2 - Distance to States (km)\nDifference in this problem is we don’t want to unify in the beginning but rather build the boundaries as their own feature:\n\n# Converting polygons to the MULTILINESTRING:\n\nstates &lt;- st_cast(us_eqdc, \"MULTILINESTRING\")\n\n# Calculating city distance to nearest state border:\n\ns_bor_dist &lt;- \n  st_distance(uscities_sf, states)\n\n# CONVERTING TO KM:\nuscities_sf$s_dist_km &lt;-\n  apply(s_bor_dist, 1, min) |&gt;\n  set_units(\"km\") |&gt;\n  drop_units()\n  \n# Making a flextable of five fartherst city to state boundary distance\n\ntop5_s &lt;- uscities_sf |&gt;\n  st_drop_geometry() |&gt;\n  arrange(desc(s_dist_km)) |&gt;\n  select(city, state_name, s_dist_km) |&gt;\n  slice_head(n = 5)\n\nflextable(as.data.frame(top5_s))\n\ncitystate_names_dist_kmBriggsTexas314,790.1LampasasTexas308,900.2FlorenceTexas304,089.8SaladoTexas302,804.1KempnerTexas302,526.0\n\n\n\n\n2.3 - Distance to Mexico (km)\n\n# Getting Mexico from country boundaries:\n\nmex &lt;- b_eqdc |&gt;\n  filter(admin == \"Mexico\")\n\n# Converting to a MULTILINESTRING\n\nmex_bor &lt;- st_cast(mex, \"MULTILINESTRING\")\n\n# Calculating city distance to nearest state border:\n\nmex_bor_dist &lt;- \n  st_distance(uscities_sf, mex_bor)\n\n# CONVERTING TO KM:\nuscities_sf$mex_dist_km &lt;-\n  apply(mex_bor_dist, 1, min) |&gt;\n  set_units(\"km\") |&gt;\n  drop_units()\n  \n# Making a flextable of five fartherst city to state boundary distance\n\ntop5_mex &lt;- uscities_sf |&gt;\n  st_drop_geometry() |&gt;\n  arrange(desc(mex_dist_km)) |&gt;\n  select(city, state_name, mex_dist_km) |&gt;\n  slice_head(n = 5)\n\nflextable(as.data.frame(top5_mex))\n\ncitystate_namemex_dist_kmGrand IsleMaine3,282,825CaribouMaine3,250,330Presque IsleMaine3,234,570OakfieldMaine3,175,577Island FallsMaine3,162,285\n\n\n\n# Making Canada from boundaries list\ncan &lt;- b_eqdc |&gt;\n  filter(admin == \"Canada\")\n\n# Converting to a MULTILINESTRING:\ncan_bor &lt;- st_cast(can, \"MULTILINESTRING\")\n\n# Calculating distances:\ncan_bor_dist &lt;- st_distance(uscities_sf, can_bor)\n\n# Converting to km:\nuscities_sf$can_dist_km &lt;-\n  apply(can_bor_dist, 1, min) |&gt;\n  set_units(\"km\") |&gt;\n  drop_units()\n\n# Making a flexttable of the five farthest cities to Canada:\ntop5_can &lt;- uscities_sf |&gt;\n  st_drop_geometry() |&gt;\n  arrange(desc(can_dist_km)) |&gt;\n  select(city, state_name, can_dist_km) |&gt;\n  slice_head(n = 5)\n\nflextable(as.data.frame(top5_can))\n\ncitystate_namecan_dist_kmGuadalupe GuerraTexas2,206,455SandovalTexas2,205,641FrontonTexas2,204,794Fronton RanchettesTexas2,202,118EvergreenTexas2,202,020"
  },
  {
    "objectID": "index.html#question-3",
    "href": "index.html#question-3",
    "title": "Lab 10: Distances and the Border Zone",
    "section": "Question 3:",
    "text": "Question 3:\nIn this section we will focus on visualizing the distance data you calculated above. You will be using ggplot to make your maps, ggrepl to label significant features, and gghighlight to emphasize important criteria.\n\n3.1 - Data\n\n# Finding the top ten most populated cities:\n\ntop10 &lt;- uscities_sf |&gt;\n  arrange(desc(population)) |&gt;\n  slice_head(n = 10)\n\n# Three Continents Map:\n\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"lightgrey\", color = \"black\", lty = \"solid\", size = 0.3) +\n  geom_sf(data = us_eqdc, fill = NA, color = \"black\", lty = \"dashed\", size = 0.5) +\n  geom_sf(data = states, color = \"grey60\", lty = \"dotted\", size = 0.3) +\n  geom_sf(data = top10, aes(size = population), color = \"darkorange1\", alpha = 0.6) +\n  ggrepel::geom_label_repel(data = top10, aes(geometry = geometry, label = city), stat = \"sf_coordinates\", size = 3, max.overlaps = 10) +\n  theme_linedraw() +\n  labs(title = \"Top 10 Populated US Cities Including Boundaries\",\n       size = \"Population\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")\n\n\n\n\n\n\n\n\n\n\n3.2 - City Distance from the Border\n\n# Finding the 5 farthest cities\ntop5_bor &lt;- uscities_sf |&gt;\n  arrange(desc(bor_dist_km)) |&gt;\n  slice_head(n = 5)\n\n# Plotting it out:\n\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"white\", color = \"black\", size = 0.2) +\n  geom_sf(data = uscities_sf, aes(color = bor_dist_km), size = 1) +\n  scale_color_viridis_c(name = \"Distance to US Border (km)\", option = \"C\") +\n  geom_sf(data = top5_bor, color = \"red\", size = 2) +\n  ggrepel::geom_label_repel(data = top5_bor,\n                            aes(geometry = geometry, label = city),\n                            stat = \"sf_coordinates\", size = 3) +\n  theme_linedraw() +\n  labs(title = \"Top 5 Cities Furthest from US Border, Colored Accordingly\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")\n\n\n\n\n\n\n\n\n\n\n3.3 - City Distance from Nearest State\n\n# Finding furthers five cities from state borders:\n\ntop5_state &lt;- uscities_sf |&gt;\n  arrange(desc(s_dist_km)) |&gt;\n  slice_head(n = 5)\n\n# Plotting:\n\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"white\", color = \"black\", size = 0.2) +\n  geom_sf(data = uscities_sf, aes(color = s_dist_km), size = 1) +\n  scale_color_viridis_c(name = \"Distance to Nearest State Border (km)\", option = \"D\") +\n  geom_sf(data = top5_state, color = \"red\", size = 2) +\n  ggrepel::geom_label_repel(data = top5_state,                         aes(geometry = geometry, label = city),stat = \"sf_coordinates\", size = 3) +\n  theme_linedraw() +\n  labs(title = \"US Cities Furthest from Inner-State Borders\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")\n\n\n\n\n\n\n\n\n\n\n3.4 - Equidistance Boundary from Mexico and Canada\n\n# Create new variable: absolute difference\nuscities_sf &lt;- uscities_sf |&gt;\n  mutate(diff_can_mex = abs(can_dist_km - mex_dist_km))\n\n# Filter cities roughly equidistant (±100 km)\nequal_dist_cities &lt;- uscities_sf |&gt;\n  filter(diff_can_mex &lt;= 100)\n\n# Top 5 populous cities in this zone\ntop5_equal_dist &lt;- equal_dist_cities |&gt;\n  arrange(desc(population)) |&gt;\n  slice_head(n = 5)\n\n# Plotting:\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"white\", color = \"black\", size = 0.2) +\n  geom_sf(data = uscities_sf, color = \"lightgray\", size = 0.5) +\n  geom_sf(data = equal_dist_cities, aes(color = diff_can_mex), size = 1) +\n  scale_color_viridis_c(name = \"Abs. Diff: Canada vs Mexico (km)\", option = \"B\") +\n  gghighlight::gghighlight(diff_can_mex &lt;= 100, use_direct_label = FALSE) +\n  geom_sf(data = top5_equal_dist, color = \"red\", size = 2) +\n  ggrepel::geom_label_repel(data = top5_equal_dist,\n                            aes(geometry = geometry, label = city),\n                            stat = \"sf_coordinates\", size = 3) +\n  theme_linedraw() +\n  labs(title = \"US Cities Equidistant to Mexico and Canada Boundaries (±100 km)\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")\n\nWarning: Could not calculate the predicate for layer 1; ignored"
  },
  {
    "objectID": "index.html#question-4",
    "href": "index.html#question-4",
    "title": "Lab 10: Distances and the Border Zone",
    "section": "Question 4:",
    "text": "Question 4:\nReal World Application Recently, Federal Agencies have claimed basic constitutional rights protected by the Fourth Amendment (protecting Americans from random and arbitrary stops and searches) do not apply fully at our borders (see Portland). For example, federal authorities do not need a warrant or suspicion of wrongdoing to justify conducting what courts have called a “routine search,” such as searching luggage or a vehicle. Specifically, federal regulations give U.S. Customs and Border Protection (CBP) authority to operate within 100 miles of any U.S. “external boundary”. Further information can be found at this ACLU article.\n\n4.1 - Quantifying Border Zone:\n\n# Creating 100-mile (160km) buffer around US Border:\n\nbuffer &lt;- st_buffer(us_border, dist = set_units(160, \"km\"))\n\n# Filter Cities within Buffer:\ncities_buff &lt;- uscities_sf[\n  st_intersects(uscities_sf, buffer, sparse = FALSE), ]\n\n# Total Pop in 100 mile Buffer\ntot_pop_buff &lt;- sum(cities_buff$population)\n# 216,039,700 million people!\n\n\n# Total Pop in all US Cities:\ntot_pop_us &lt;- sum(uscities_sf$population)\n# 396,228,558 million people\n\n\n# Percentage of people in 100 mile buffer:\nper_pop_buff &lt;- (tot_pop_buff / tot_pop_us) * 100\n# 54.524 % of people live in 100 mile buffer around us border! WOW\n\n\n# Summary table:\n\nborder_buff_sum &lt;- data.frame(\n  Number_of_Cities = nrow(cities_buff),\n  Total_Population_in_Buffer = tot_pop_buff,\n  Percentage_of_Population_in_Buffer = per_pop_buff\n)\n\n\nborder_buff_sum\n\n\n  \n\n\n\n\n\n4.2 - Mapping Border Zone\n\n# Finding top ten most populated cities within our 100 mile buffer:\ntop10_buff &lt;- cities_buff |&gt;\n  arrange(desc(population)) |&gt;\n  slice_head(n = 10)\n\n# Plotting:\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"white\", color = \"black\", size = 0.2) +\n  geom_sf(data = top10_buff, aes(color = population), size = 3) +\n  scale_color_gradient(low = \"yellow\", high = \"darkred\", name = \"Population\",\n                       limits = c(min(top10_buff$population), max(top10_buff$population))) +\n  ggrepel::geom_label_repel(data = top10_buff,\n                            aes(geometry = geometry, label = city),\n                            stat = \"sf_coordinates\",\n                            size = 3,\n                            max.overlaps = 100) +\n  theme_linedraw() +\n  labs(title = \"Top 10 Most Populated Cities within 100 Miles of US Nation Border\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")\n\n\n\n\n\n\n\n\n\n\n4.3 - Mapping the Most Populous City in each state within the Danger Zone\n\n#Finding most populated within 100 mile buffer zone:\nmost_pop_cities &lt;- cities_buff |&gt;\n  group_by(state_name) |&gt;\nslice_max(population, n = 1) |&gt;\n  ungroup()\n\n# PLOTTING:\nggplot() +\n  geom_sf(data = b_eqdc, fill = \"white\", color = \"black\", size = 0.2) +\n  geom_sf(data = most_pop_cities, aes(color = population), size = 3) +\n  scale_color_gradient(low = \"yellow\", high = \"darkred\", name = \"Population\",\n                       limits = c(min(most_pop_cities$population), max(most_pop_cities$population))) +\n  ggrepel::geom_label_repel(data = most_pop_cities,\n                            aes(geometry = geometry, label = city),\n                            stat = \"sf_coordinates\",\n                            size = 3,\n                            max.overlaps = 100) +\n  theme_linedraw() +\n  labs(title = \"Top 10 Most Populated Cities within 100 Miles of US Nation Border\",\n       x = \"Longitude\",\n       y = \"Latitude\",\n       caption = \"ESS330 - Lab 10 - Neva Morgan\")"
  }
]